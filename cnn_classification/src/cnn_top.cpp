/*	Very simple testbench that only tests the first image
 *
 * */

#include <iostream>
#include <fstream>
#include "../include/cnn.h"

using namespace std;

int sample_cat = 9;
VALUE_TYPE sample_img[28][28] = {
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0117647, 0, 0, 0.27451, 0.0627451, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.266667, 0.662745, 0.494118, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00784314, 0, 0.0901961, 0.368627, 0.505882, 0.670588, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00784314, 0, 0.211765, 0.352941, 0.407843, 0.737255, 0.0470588, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00392157, 0, 0.00392157, 0, 0.254902, 0.435294, 0.384314, 0.737255, 0.262745, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00784314, 0, 0.298039, 0.447059, 0.392157, 0.721569, 0.415686, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00392157, 0, 0.00784314, 0, 0, 0.333333, 0.435294, 0.368627, 0.670588, 0.643137, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0156863, 0, 0.0823529, 0.462745, 0.447059, 0.380392, 0.6, 0.72549, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00784314, 0, 0.00392157, 0, 0.207843, 0.501961, 0.45098, 0.384314, 0.529412, 0.780392, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00392157, 0, 0, 0, 0.360784, 0.482353, 0.498039, 0.4, 0.470588, 0.823529, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0117647, 0, 0.101961, 0.458824, 0.435294, 0.529412, 0.423529, 0.494118, 0.827451, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0117647, 0, 0, 0.423529, 0.435294, 0.443137, 0.533333, 0.415686, 0.498039, 0.823529, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00784314, 0, 0, 0.384314, 0.458824, 0.403922, 0.462745, 0.560784, 0.466667, 0.572549, 0.815686, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0.00392157, 0.00392157, 0.0156863, 0, 0, 0.34902, 0.533333, 0.388235, 0.45098, 0.498039, 0.494118, 0.470588, 0.72549, 0.745098, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0.00784314, 0, 0, 0.0431373, 0.45098, 0.545098, 0.431373, 0.435294, 0.505882, 0.490196, 0.498039, 0.505882, 0.764706, 0.588235, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.207843, 0.537255, 0.447059, 0.352941, 0.427451, 0.458824, 0.52549, 0.545098, 0.592157, 0.584314, 0.819608, 0.321569, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0.105882, 0.345098, 0.505882, 0.509804, 0.415686, 0.368627, 0.431373, 0.533333, 0.560784, 0.521569, 0.603922, 0.611765, 0.815686, 0.0313726, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0.329412, 0.560784, 0.470588, 0.501961, 0.537255, 0.6, 0.635294, 0.611765, 0.603922, 0.533333, 0.560784, 0.654902, 1, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0.0431373, 0.431373, 0.576471, 0.627451, 0.658824, 0.584314, 0.529412, 0.52549, 0.647059, 0.627451, 0.580392, 0.745098, 0.819608, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0.0117647, 0, 0, 0.686275, 0.690196, 0.6, 0.513726, 0.564706, 0.603922, 0.666667, 0.54902, 0.490196, 0.745098, 0.694118, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0.00392157, 0, 0, 0.615686, 0.623529, 0.611765, 0.592157, 0.584314, 0.603922, 0.603922, 0.607843, 0.635294, 0.768627, 0.960784, 0.698039, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.65098, 0.654902, 0.647059, 0.662745, 0.623529, 0.611765, 0.592157, 0.631373, 0.635294, 0.776471, 0.988235, 0.815686, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.529412, 0.698039, 0.654902, 0.67451, 0.654902, 0.627451, 0.603922, 0.564706, 0.564706, 0.776471, 0.984314, 0.737255, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0.027451, 0, 0.0862745, 0.603922, 0.584314, 0.560784, 0.560784, 0.564706, 0.552941, 0.560784, 0.607843, 0.541176, 0.733333, 0.984314, 0.686275, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0.364706, 0.658824, 0.592157, 0.615686, 0.623529, 0.619608, 0.576471, 0.541176, 0.67451, 0.6, 0.772549, 0.968627, 0.635294, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0.145098, 0.466667, 0.415686, 0.54902, 0.564706, 0.619608, 0.662745, 0.662745, 0.611765, 0.588235, 0.631373, 0.635294, 0.741176, 0.862745, 0.619608, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0431373, 0.188235, 0.466667, 0.698039, 0.647059, 0.741176, 0.768627, 0.721569, 0.807843, 0.592157, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.168627, 0.243137, 0.227451, 0.141176, 0.192157, 0.0431373, 0, 0, 0, 0, 0, 0
};

int main() {
	VALUE_TYPE result[10];
    cnn(sample_img, result);
    int c = 0;
    float c_p = -1.0;
    for (int i = 0; i < 10; i++) {
        if (result[i] > c_p) {
            c_p = result[i];
            c = i;
        }
    }

    if (c == sample_cat) {
        cout << "Correct" << endl;
    } else {
        cout << "Incorrect" << endl;
    }

    return 0;
}
